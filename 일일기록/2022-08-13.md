# 2022-08-13

## React form에서 input value useRef로 관리하는 법

```tsx
function TodoAddForm({ handleAdd }: Props) {
	const formRef = useRef<HTMLFormElement>(null);
	const inputRef = useRef<HTMLInputElement>(null);

	return (
		<form onSubmit={handleSubmit} ref={formRef}>
			<input type='text' ref={inputRef} />
			<button>Submit</button>
		</form>
	);

	function handleSubmit(e: FormEvent<HTMLFormElement>) {
		e.preventDefault();
		handleAdd(inputRef.current?.value);
		formRef.current?.reset();
	}
}
```

1. inputRef의 current.value를 통해서 input value 접근 가능
2. formRef의 reset()를 통해서 input value 초기화 가능
3. submit은 새로고침을 발생시키기 때문에 e.preventDefault로 이벤트 방지

## UseMemo, UseCallback을 통한 리렌더링 방지

```tsx
// 리렌더링 방지 시킬 컴포넌트
export default memo(TodoAddForm);

// 해당 함수가 props로 받는 함수
const handleAdd = useCallback((contents: string | undefined) => {
	if (contents === undefined) return;
	setTodoList((prevTodoList) => [...prevTodoList, { id: v4(), contents, count: 0 }]);
}, []);
```

React devtools에서 리렌더링 유무, 원인을 알 수 있다.
> https://jsramblings.com/how-to-check-if-your-component-rerendered-and-why/

## Props 한번에 넘겨주기

```tsx
const TodoList = ({ todoList, handleIncreaseCount, handleDecreaseCount, handleDelete }: Props) => {
	return (
		<ul>
			{todoList.map((todoItem) => {
				return (
					<TodoItem
						{...todoItem}
						handleIncreaseCount={handleIncreaseCount}
						handleDecreaseCount={handleDecreaseCount}
						handleDelete={handleDelete}
						key={todoItem.id}
					/>
				);
			})}
		</ul>
	);
};
```

스프레드 연산자를 이용해서 Props를 한번에 전달하는 것이 가능하다.
그러나 eslint에서 권장하지 않는 방법이라고 한다.