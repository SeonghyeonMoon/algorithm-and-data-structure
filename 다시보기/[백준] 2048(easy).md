# [백준] 2048(easy)

```js
const n = Number(input());
const initialBoard = [];
for (let i = 0; i < n; i++) {
  initialBoard.push(input().split(' ').map(Number));
}

const move = (board, direction) => {
  const result = Array.from(Array(n), () => Array(n).fill(0));

  if (direction === 'up') {
    for (let y = 0; y < n; y++) {
      const stack = [];
      let prev = 0;
      for (let x = 0; x < n; x++) {
        const block = board[x][y];

        if (block === 0) continue;

        if (prev === 0) {
          prev = block;
          continue;
        }

        if (prev === block) {
          stack.push(prev * 2);
          prev = 0;
          continue;
        }

        stack.push(prev);
        prev = block;
      }
      if (prev) stack.push(prev);

      for (let i = 0; i < stack.length; i++) {
        result[i][y] = stack[i];
      }
    }
    return result;
  }

  if (direction === 'down') {
    for (let y = 0; y < n; y++) {
      const stack = [];
      let prev = 0;
      for (let x = n - 1; x >= 0; x--) {
        const block = board[x][y];

        if (block === 0) continue;

        if (prev === 0) {
          prev = block;
          continue;
        }

        if (prev === block) {
          stack.push(prev * 2);
          prev = 0;
          continue;
        }

        stack.push(prev);
        prev = block;
      }
      if (prev) stack.push(prev);

      for (let i = 0; i < stack.length; i++) {
        result[n - 1 - i][y] = stack[i];
      }
    }
    return result;
  }

  if (direction === 'left') {
    for (let x = 0; x < n; x++) {
      const stack = [];
      let prev = 0;
      for (let y = 0; y < n; y++) {
        const block = board[x][y];

        if (block === 0) continue;

        if (prev === 0) {
          prev = block;
          continue;
        }

        if (prev === block) {
          stack.push(prev * 2);
          prev = 0;
          continue;
        }

        stack.push(prev);
        prev = block;
      }
      if (prev) stack.push(prev);

      for (let i = 0; i < stack.length; i++) {
        result[x][i] = stack[i];
      }
    }
    return result;
  }

  if (direction === 'right') {
    for (let x = 0; x < n; x++) {
      const stack = [];
      let prev = 0;
      for (let y = n - 1; y >= 0; y--) {
        const block = board[x][y];

        if (block === 0) continue;

        if (prev === 0) {
          prev = block;
          continue;
        }

        if (prev === block) {
          stack.push(prev * 2);
          prev = 0;
          continue;
        }

        stack.push(prev);
        prev = block;
      }
      if (prev) stack.push(prev);

      for (let i = 0; i < stack.length; i++) {
        result[x][n - 1 - i] = stack[i];
      }
    }
    return result;
  }
};

let result = 0;

const getMax = (board) => {
  let result = 0;
  for (let i = 0; i < n; i++) {
    for (let j = 0; j < n; j++) {
      result = Math.max(result, board[i][j]);
    }
  }
  return result;
};

const dfs = (board, count) => {
  if (count === 5) {
    result = Math.max(result, getMax(board));
    return;
  }
  dfs(move(board, 'up'), count + 1);
  dfs(move(board, 'down'), count + 1);
  dfs(move(board, 'left'), count + 1);
  dfs(move(board, 'right'), count + 1);
};

dfs(initialBoard, 0);
console.log(result);
```