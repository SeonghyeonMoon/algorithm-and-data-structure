# [백준] 벽 부수고 이동하기 4

## 풀이

```js
const solution = () => {
  const [n, m] = input().split(' ').map(Number);
  const map = Array.from({ length: n }, () => input().split('').map(Number));
  const move = [[0, 1], [0, -1], [1, 0], [-1, 0]];

  const dfs = (x, y, id) => {
    const stack = [[x, y]];
    const visited = [];

    while (stack.length) {
      const [x, y] = stack.pop();
      if (map[x][y] === 1) continue;
      map[x][y] = 1;
      visited.push([x, y]);
      for (const [dx, dy] of move) {
        const [nx, ny] = [x + dx, y + dy];
        if (nx < 0 || nx >= n || ny < 0 || ny >= m || map[nx][ny]) continue;
        stack.push([nx, ny]);
      }
    }

    for (const [x, y] of visited) {
      map[x][y] = [visited.length, id];
    }
  }

  let id = 0;
  for (let i = 0; i < n; i++) {
    for (let j = 0; j < m; j++) {
      if (map[i][j] === 0) {
        dfs(i, j, id++);
      }
    }
  }

  for (let i = 0; i < n; i++) {
    for (let j = 0; j < m; j++) {
      if (map[i][j] === 1) {
        const visited = [];
        for (const [dx, dy] of move) {
          const [nx, ny] = [i + dx, j + dy];
          if (nx < 0 || nx >= n || ny < 0 || ny >= m) continue;
          if (visited.includes(map[nx][ny][1])) continue;
          if (Array.isArray(map[nx][ny])) {
            map[i][j] += map[nx][ny][0];
            visited.push(map[nx][ny][1])
          }
        }
      }
    }
  }

  for (let x = 0; x < n; x++) {
    for (let y = 0; y < m; y++) {
      if (Array.isArray(map[x][y])) {
        map[x][y] = 0;
        continue;
      }
      map[x][y] %= 10;
    }
    map[x] = map[x].join('');
  }

  return map.join('\n')
}

console.log(solution());

```